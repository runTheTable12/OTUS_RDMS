**Домашняя работа №17: Спрогнозировать рост данных и спроектировать модель хранения и архивации**

Дипломным проекто будет база данных для сервиса спортивной статистики и аналитики, поэтому данное домашнее задания сделаю для неё, а не для он-лайн магазина.

- прогноз по возможному росту базы

Сервис может быть реализован в нескольких вариантах - первый, чистая БД для аналитического проекта, где потребителям являются аналитики, исследователи и инженеры.
Предполагается, что они умеют ходить в БД и используют данные для визуализации, анализа и ML.
А таком случае, рост числа пользователей будет небольшим - это внутренний корпоративный продукт, которым будут пользоваться несколько команд.

Однако в дальнейшем может создаваться готовое решение для обычных пользователей - полноценный сайт, где любой сможет посмотреть на красивые визуализации, метрики и тд. В данном случае рост будет выше, но зависеть это будет уже от популярности продукта. Скажем, при средней оценке в 100 пользователей в месяц, в год будет порядка 1200 новых пользователей.

- рост данных

Данные будут в табулярном формате. Если исходить из расчёта того, что будут для начала представлены чемпионаты и кубки 8 стран в футболе, 4 североамериканские профессиональные лиги, а также КХЛ и евролига, а основным событием для записи в БД станет результат игры и её статистика, то попробуем сделать примерные вычисления за год/сезон:

380 на 4 (игр английской АПЛ, испанская Ла Лига, итальянская Серия А, французская Лига 1) + 308 на 2(Бундеслига, чемпионат Нидерландов, чемпионат Португалии) + 240(российская РПЛ) + 272(НФЛ) + 1312(НХЛ) + 1230(НБА) + 2430(МЛБ) + 748 (КХЛ) + 328 (Евролига)

Итого: 8696

Если добавить к этому игры кубоков и плей-офф, то получится около 9000 записей в год.

- рост количества пользователей

Ожидается примерно 1200 пользователей в год.

НО если сделать англоязычную версию продукта, то это существенно увеличит число пользователей. Допустим, ещё 3000 в год.

Если добавить такой вид спорта как крикет, и сделать часть продукта бесплатной, то страшно представить, сколько людей из Индии и Пакистана может зарегистрироваться в случае, если продукт будет интересным :) 


- всплески одновременных соединений

Вечер пятницы и выходные. Так как большинство матчей играются в уикэнд, то люди могут смотреть информацию по окончании рабочей недели. При англоязычной версии продукта стоит ожидания продолжительного всплеска с окончанием рабочей недели в Сибири до начала рабочей недели в Северной Америке. 

Среднее время сессии, думаю, будет около 30-40 минут.


- описываем возможные угрозы и методы защиты от них

Необходимо изолировать саму БД от внешнего подключения посторонними. В идеале, порты должны быть открыты для команд аналитиков и инженеров по внутреннему vpn, и что-то похожее реализовать для сервиса.

Считаю, что для технических процессов типа ETL или забора данных для ML-модели необходимо создавать отдельные учётки с ограниченными правами. То же касается и сотрудников проекта. Действовать по принципу - расширять права по мере необходимости, а не давать всем админа. Это снизит угрозу непреднамеренных воздействий с базой. 

- предлагаем стратегии бэкапа

Бэкапа раз в сутки, думаю, будет достаточно, так как данные обновляются не часто, только в Северной Америке играют в любой день без остановки. 
Конечно, тут ещё и по ресурсам надо смотреть. 
Поскольку основная нагрузка будет на чтение, то бэкапа можно делать не с мастера.
Сами копии, думаю, можно хранить так - одну в хранилище в облаке, другую в хранилище на живой машине. Периодически можно также делать копию и на физический носитель.

- репликация и кластеризация

Я бы предложил отказоустойчивый кластер patroni и consul из трёх нод.